<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Yellowstone & Grand Teton Adventure Map</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c5530, #4a7c59);
            color: #fff;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .date-range {
            font-size: 1.2em;
            color: #e0e0e0;
            margin-bottom: 15px;
        }
        
        .coverage-badge {
            display: inline-block;
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            color: #000;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px;
        }
        
        .map-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .day-button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .day-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .day-button.active {
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            transform: scale(1.05);
        }
        
        .map-section {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .map-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        #map {
            height: 650px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .location-info-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.2);
            max-height: 690px;
            overflow-y: auto;
        }
        
        .panel-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #ffd700;
            text-align: center;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
        }
        
        .location-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .location-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .location-card:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .location-card.selected {
            border-color: #ffd700;
            background: rgba(255,215,0,0.2);
        }
        
        .location-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .location-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 12px;
            border: 2px solid #fff;
        }
        
        .location-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #fff;
        }
        
        .location-time {
            font-size: 0.9em;
            color: #4ecdc4;
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .location-desc {
            font-size: 0.9em;
            color: #e0e0e0;
            line-height: 1.4;
        }
        
        .day-separator {
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
            height: 2px;
            margin: 20px 0;
            border-radius: 1px;
        }
        
        .itinerary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .day-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .day-card:hover {
            transform: translateY(-5px);
        }
        
        .day-title {
            font-size: 1.4em;
            margin-bottom: 15px;
            color: #ffd700;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
        }
        
        .location-item {
            margin: 12px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            border-left: 4px solid #4ecdc4;
        }
        
        .location-name {
            font-weight: bold;
            color: #4ecdc4;
        }
        
        .location-time {
            font-size: 0.9em;
            color: #ccc;
        }
        
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .stat-label {
            font-size: 1.1em;
            color: #e0e0e0;
        }
        
        .custom-popup {
            font-family: 'Segoe UI', sans-serif;
        }
        
        .popup-title {
            font-weight: bold;
            color: #2c5530;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .popup-time {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .popup-description {
            color: #333;
            font-size: 14px;
            line-height: 1.4;
        }
        
        @media (max-width: 1024px) {
            .map-section {
                grid-template-columns: 1fr;
            }
            
            .location-info-panel {
                max-height: 300px;
                order: 2;
            }
            
            .map-container {
                order: 1;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .map-controls {
                justify-content: center;
            }
            
            .day-button {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            #map {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèîÔ∏è Complete Yellowstone & Grand Teton Adventure üó∫Ô∏è</h1>
            <div class="date-range">August 29 - September 1, 2025</div>
            <p>Comprehensive route covering all 15+ major attractions</p>
            <div class="coverage-badge">‚úÖ All 10 Yellowstone Highlights Covered!</div>
            <div class="coverage-badge">‚úÖ 5+ Grand Teton Must-Sees</div>
        </div>
        
        <div class="map-controls">
            <button class="day-button active" onclick="showDay('all')">All Locations</button>
            <button class="day-button" onclick="showDay(1)">Day 1: Thermal Features</button>
            <button class="day-button" onclick="showDay(2)">Day 2: Wildlife & Canyon</button>
            <button class="day-button" onclick="showDay(3)">Day 3: Grand Teton</button>
            <button class="day-button" onclick="showDay(4)">Day 4: Jackson & SLC</button>
        </div>
        
        <div class="map-section">
            <div class="map-container">
                <div id="map"></div>
            </div>
            
            <div class="location-info-panel">
                <div class="panel-title">üìç All Trip Locations (15+)</div>
                <div id="location-list" class="location-list">
                    <!-- Location cards will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number">900</div>
                <div class="stat-label">Miles Driven</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">15+</div>
                <div class="stat-label">Major Attractions</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">Yellowstone Highlights</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">12+</div>
                <div class="stat-label">Miles of Hiking</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">Coverage Complete</div>
            </div>
        </div>
        
        <div class="itinerary-grid">
            <div class="day-card">
                <div class="day-title">Day 1: Yellowstone Thermal Circuit</div>
                <div class="location-item">
                    <div class="location-name">Old Faithful & Upper Geyser Basin</div>
                    <div class="location-time">9:00-10:30 AM</div>
                    <p>Famous geyser + 1.3-mile basin trail</p>
                </div>
                <div class="location-item">
                    <div class="location-name">West Thumb Geyser Basin</div>
                    <div class="location-time">11:00 AM-12:00 PM</div>
                    <p>Lakeside thermal features</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Firehole Lake Drive</div>
                    <div class="location-time">1:30-2:00 PM</div>
                    <p>One-way scenic geyser drive</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Grand Prismatic Spring</div>
                    <div class="location-time">2:30-4:00 PM</div>
                    <p>Rainbow hot spring + overlook trail</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Fountain Paint Pot</div>
                    <div class="location-time">4:30-5:30 PM</div>
                    <p>4 thermal feature types in one loop</p>
                </div>
            </div>
            
            <div class="day-card">
                <div class="day-title">Day 2: Wildlife & Grand Canyon</div>
                <div class="location-item">
                    <div class="location-name">Mammoth Hot Springs</div>
                    <div class="location-time">9:00-10:30 AM</div>
                    <p>Limestone terraces + historic fort</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Hayden Valley</div>
                    <div class="location-time">11:00 AM-12:00 PM</div>
                    <p>Prime wildlife viewing area</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Artist Point Trail</div>
                    <div class="location-time">12:30-2:00 PM</div>
                    <p>Must-do hike to iconic Lower Falls view</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Lamar Valley</div>
                    <div class="location-time">2:30-3:30 PM</div>
                    <p>America's Serengeti wildlife drive</p>
                </div>
            </div>
            
            <div class="day-card">
                <div class="day-title">Day 3: Grand Teton National Park</div>
                <div class="location-item">
                    <div class="location-name">Jenny Lake & Hidden Falls</div>
                    <div class="location-time">8:00 AM-12:00 PM</div>
                    <p>Boat shuttle + waterfall hike</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Jackson Lake Dam</div>
                    <div class="location-time">2:00-2:30 PM</div>
                    <p>Perfect mountain photo spot</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Oxbow Bend</div>
                    <div class="location-time">3:00-4:30 PM</div>
                    <p>Wildlife viewing + reflections</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Mormon Row</div>
                    <div class="location-time">5:00-6:30 PM</div>
                    <p>Historic barns + golden hour</p>
                </div>
            </div>
            
            <div class="day-card">
                <div class="day-title">Day 4: Alpine Lakes & Jackson Hole</div>
                <div class="location-item">
                    <div class="location-name">Taggart Lake Trail</div>
                    <div class="location-time">9:00-11:30 AM</div>
                    <p>Alpine lake hike (3 miles RT)</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Jackson Town Square</div>
                    <div class="location-time">2:00-4:00 PM</div>
                    <p>Antler arches + shopping</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Optional: Aerial Tram</div>
                    <div class="location-time">2:00-4:00 PM</div>
                    <p>10,450 ft mountain views</p>
                </div>
                <div class="location-item">
                    <div class="location-name">Drive to Salt Lake City</div>
                    <div class="location-time">6:00-11:00 PM</div>
                    <p>End of adventure (5-hour drive)</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        let map;
        let allMarkers = [];
        let routeLines = [];
        
        // Complete location data with all requested spots
        const locations = {
            // Base locations
            islandPark: {lat: 44.4247, lng: -111.3419, name: "Island Park Airbnb", day: 0, time: "Base Camp", description: "Starting point near Yellowstone West Entrance"},
            etnaWY: {lat: 43.2619, lng: -111.0108, name: "Etna, WY Airbnb", day: 0, time: "Base Camp", description: "Base for Grand Teton exploration"},
            saltLakeCity: {lat: 40.7608, lng: -111.8910, name: "Salt Lake City", day: 4, time: "11:00 PM", description: "Final destination"},
            
            // Day 1 locations - Yellowstone West Thermal Features
            oldFaithful: {lat: 44.4604, lng: -110.8281, name: "Old Faithful & Upper Geyser Basin", day: 1, time: "9:00-10:30 AM", description: "Famous geyser + 1.3-mile trail connecting multiple geysers"},
            westThumb: {lat: 44.4169, lng: -110.5743, name: "West Thumb Geyser Basin", day: 1, time: "11:00 AM-12:00 PM", description: "Unique lakeside thermal features on Yellowstone Lake"},
            fireholeLake: {lat: 44.6194, lng: -110.8492, name: "Firehole Lake Drive", day: 1, time: "1:30-2:00 PM", description: "One-way scenic drive with Great Fountain Geyser"},
            grandPrismatic: {lat: 44.5249, lng: -110.8382, name: "Grand Prismatic Spring", day: 1, time: "2:30-4:00 PM", description: "Largest hot spring in US with rainbow colors + overlook trail"},
            fountainPaint: {lat: 44.5498, lng: -110.8199, name: "Fountain Paint Pot Trail", day: 1, time: "4:30-5:30 PM", description: "All 4 thermal feature types: mud pots, hot springs, fumaroles, geysers"},
            
            // Day 2 locations - Yellowstone North & Wildlife
            mammothSprings: {lat: 44.9763, lng: -110.7031, name: "Mammoth Hot Springs", day: 2, time: "9:00-10:30 AM", description: "Limestone terraces and historic Fort Yellowstone"},
            haydenValley: {lat: 44.6667, lng: -110.4833, name: "Hayden Valley", day: 2, time: "11:00 AM-12:00 PM", description: "Prime wildlife viewing - bison herds, elk, bears, wolves"},
            artistPoint: {lat: 44.7202, lng: -110.4967, name: "Artist Point Trail", day: 2, time: "12:30-2:00 PM", description: "Must-do hike: iconic Lower Falls view from South Rim Trail"},
            lamarValley: {lat: 44.9167, lng: -110.2167, name: "Lamar Valley", day: 2, time: "2:30-3:30 PM", description: "America's Serengeti - extended wildlife viewing drive"},
            
            // Day 3 locations - Grand Teton
            jennyLake: {lat: 43.7544, lng: -110.7269, name: "Jenny Lake & Hidden Falls", day: 3, time: "8:00 AM-12:00 PM", description: "Boat shuttle to Hidden Falls and Inspiration Point trail"},
            jacksonLakeDam: {lat: 43.8617, lng: -110.5969, name: "Jackson Lake Dam", day: 3, time: "2:00-2:30 PM", description: "Perfect Teton mountain photography location"},
            oxbowBend: {lat: 43.8717, lng: -110.5431, name: "Oxbow Bend", day: 3, time: "3:00-4:30 PM", description: "Premier wildlife spot: moose, eagles, swans + mountain reflections"},
            mormonRow: {lat: 43.6551, lng: -110.6819, name: "Mormon Row Historic District", day: 3, time: "5:00-6:30 PM", description: "Famous Moulton Barn with Teton backdrop - golden hour photography"},
            
            // Day 4 locations
            taggartLake: {lat: 43.6589, lng: -110.7872, name: "Taggart Lake Trail", day: 4, time: "9:00-11:30 AM", description: "3-mile roundtrip hike to pristine alpine lake with dramatic Teton views"},
            jacksonTown: {lat: 43.4799, lng: -110.7624, name: "Jackson Town Square", day: 4, time: "2:00-4:00 PM", description: "Famous antler arches, shopping, and mountain town culture"}
        };
        
        // Color scheme for different days
        const dayColors = {
            0: '#8e44ad', // Base locations - purple
            1: '#e74c3c', // Day 1 - red (thermal features)
            2: '#f39c12', // Day 2 - orange (wildlife & canyon)
            3: '#27ae60', // Day 3 - green (Grand Teton)
            4: '#3498db'  // Day 4 - blue (Jackson & SLC)
        };
        
        function initMap() {
            // Initialize map centered on the region
            map = L.map('map').setView([44.2, -110.3], 8);
            
            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            // Add all markers
            addAllMarkers();
            
            // Add route lines
            addRouteLines();
            
            // Populate location list
            populateLocationList();
        }
        
        function populateLocationList() {
            const locationList = document.getElementById('location-list');
            const sortedLocations = Object.keys(locations).sort((a, b) => {
                const locA = locations[a];
                const locB = locations[b];
                if (locA.day !== locB.day) return locA.day - locB.day;
                return a.localeCompare(b);
            });
            
            let currentDay = null;
            sortedLocations.forEach(key => {
                const loc = locations[key];
                
                // Add day separator for base locations and days
                if (loc.day !== currentDay && loc.day !== 0) {
                    if (currentDay !== null) {
                        const separator = document.createElement('div');
                        separator.className = 'day-separator';
                        locationList.appendChild(separator);
                    }
                    currentDay = loc.day;
                }
                
                const card = document.createElement('div');
                card.className = 'location-card';
                card.dataset.locationKey = key;
                
                const dayLabel = loc.day === 0 ? 'Base' : `Day ${loc.day}`;
                
                card.innerHTML = `
                    <div class="location-header">
                        <div class="location-icon" style="background-color: ${dayColors[loc.day]}"></div>
                        <div class="location-title">${loc.name}</div>
                    </div>
                    <div class="location-time">${dayLabel} ‚Ä¢ ${loc.time}</div>
                    <div class="location-desc">${loc.description}</div>
                `;
                
                card.addEventListener('click', () => selectLocation(key, card));
                locationList.appendChild(card);
            });
        }
        
        function selectLocation(locationKey, cardElement) {
            // Remove previous selection
            document.querySelectorAll('.location-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection to clicked card
            cardElement.classList.add('selected');
            
            // Center map on selected location
            const loc = locations[locationKey];
            map.setView([loc.lat, loc.lng], 12);
            
            // Find and open the marker popup
            const marker = allMarkers.find(m => m.locationKey === locationKey);
            if (marker) {
                marker.openPopup();
                
                // Highlight the marker temporarily
                const originalRadius = marker.options.radius;
                marker.setRadius(15);
                setTimeout(() => {
                    marker.setRadius(originalRadius);
                }, 1500);
            }
        }
        
        function addAllMarkers() {
            Object.keys(locations).forEach(key => {
                const loc = locations[key];
                const marker = L.circleMarker([loc.lat, loc.lng], {
                    radius: 10,
                    fillColor: dayColors[loc.day],
                    color: '#fff',
                    weight: 3,
                    opacity: 1,
                    fillOpacity: 0.9
                }).addTo(map);
                
                // Custom popup content
                const dayLabel = loc.day === 0 ? 'Base Camp' : `Day ${loc.day}`;
                const popupContent = `
                    <div class="custom-popup">
                        <div class="popup-title">${loc.name}</div>
                        <div class="popup-time">${dayLabel} ‚Ä¢ ${loc.time}</div>
                        <div class="popup-description">${loc.description}</div>
                    </div>
                `;
                
                marker.bindPopup(popupContent);
                marker.locationKey = key;
                marker.day = loc.day;
                
                // Add click event to center on marker and show in list
                marker.on('click', function() {
                    const card = document.querySelector(`[data-location-key="${key}"]`);
                    if (card) {
                        document.querySelectorAll('.location-card').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                });
                
                allMarkers.push(marker);
            });
        }
        
        function addRouteLines() {
            // Day 1 route - Complete thermal features circuit
            const day1Route = [
                [locations.islandPark.lat, locations.islandPark.lng],
                [locations.oldFaithful.lat, locations.oldFaithful.lng],
                [locations.westThumb.lat, locations.westThumb.lng],
                [locations.fireholeLake.lat, locations.fireholeLake.lng],
                [locations.grandPrismatic.lat, locations.grandPrismatic.lng],
                [locations.fountainPaint.lat, locations.fountainPaint.lng],
                [locations.islandPark.lat, locations.islandPark.lng]
            ];
            
            // Day 2 route - Wildlife and canyon, then move to Etna
            const day2Route = [
                [locations.islandPark.lat, locations.islandPark.lng],
                [locations.mammothSprings.lat, locations.mammothSprings.lng],
                [locations.haydenValley.lat, locations.haydenValley.lng],
                [locations.artistPoint.lat, locations.artistPoint.lng],
                [locations.lamarValley.lat, locations.lamarValley.lng],
                [locations.etnaWY.lat, locations.etnaWY.lng]
            ];
            
            // Day 3 route - Grand Teton highlights
            const day3Route = [
                [locations.etnaWY.lat, locations.etnaWY.lng],
                [locations.jennyLake.lat, locations.jennyLake.lng],
                [locations.jacksonLakeDam.lat, locations.jacksonLakeDam.lng],
                [locations.oxbowBend.lat, locations.oxbowBend.lng],
                [locations.mormonRow.lat, locations.mormonRow.lng],
                [locations.etnaWY.lat, locations.etnaWY.lng]
            ];
            
            // Day 4 route - Final day to SLC
            const day4Route = [
                [locations.etnaWY.lat, locations.etnaWY.lng],
                [locations.taggartLake.lat, locations.taggartLake.lng],
                [locations.jacksonTown.lat, locations.jacksonTown.lng],
                [locations.saltLakeCity.lat, locations.saltLakeCity.lng]
            ];
            
            // Create polylines for each day
            const routes = [
                {path: day1Route, color: dayColors[1], day: 1, label: "Thermal Features Circuit"},
                {path: day2Route, color: dayColors[2], day: 2, label: "Wildlife & Canyon Route"},
                {path: day3Route, color: dayColors[3], day: 3, label: "Grand Teton Loop"},
                {path: day4Route, color: dayColors[4], day: 4, label: "Final Day Route"}
            ];
            
            routes.forEach(route => {
                const polyline = L.polyline(route.path, {
                    color: route.color,
                    weight: 4,
                    opacity: 0.8,
                    dashArray: '10, 5'
                }).addTo(map);
                
                polyline.bindTooltip(route.label, {
                    permanent: false,
                    direction: 'center',
                    className: 'route-tooltip'
                });
                
                polyline.day = route.day;
                routeLines.push(polyline);
            });
        }
        
        function showDay(day) {
            // Update button active state
            document.querySelectorAll('.day-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update location cards visibility
            document.querySelectorAll('.location-card').forEach(card => {
                const locationKey = card.dataset.locationKey;
                const loc = locations[locationKey];
                
                if (day === 'all' || loc.day === day || loc.day === 0) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                    card.classList.remove('selected');
                }
            });
            
            if (day === 'all') {
                // Show all markers and routes
                allMarkers.forEach(marker => marker.setStyle({opacity: 1, fillOpacity: 0.9}));
                routeLines.forEach(line => line.setStyle({opacity: 0.8}));
                map.setView([44.2, -110.3], 8);
            } else {
                // Hide all first
                allMarkers.forEach(marker => marker.setStyle({opacity: 0.3, fillOpacity: 0.3}));
                routeLines.forEach(line => line.setStyle({opacity: 0.2}));
                
                // Show selected day
                allMarkers.forEach(marker => {
                    if (marker.day === day || marker.day === 0) {
                        marker.setStyle({opacity: 1, fillOpacity: 0.9});
                    }
                });
                
                routeLines.forEach(line => {
                    if (line.day === day) {
                        line.setStyle({opacity: 0.8});
                    }
                });
                
                // Focus map view on selected day
                if (day === 1) map.setView([44.5, -110.8], 9); // Yellowstone West
                else if (day === 2) map.setView([44.7, -110.4], 8); // Yellowstone North
                else if (day === 3 || day === 4) map.setView([43.7, -110.7], 9); // Grand Teton/Jackson
            }
        }
        
        // Initialize map when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initMap();
        });
    </script>
</body>
</html>